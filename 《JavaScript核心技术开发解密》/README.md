## 函数调用栈
函数调用栈：先进后出（push 进，pop出）<br />堆：主要应用于数据的存储

在JavaScript中函数运行时，会创建一个执行上下文，在执行上下文中，会创建一个变量对象（VO）基础类型的数据就会保存在变量对象中，而引用类型的数据则会保存在堆内存中。

## 执行上下文（Execution Context）

JavaScript代码在执行时，会进入一个执行上下文中 。 执行上下文可以理解为当前代码的运行环境 。

JavaScript的运行环境主要包括三个：

1. 全局环境
1. 函数环境
1. eval环境

这些环境都以栈的形式来进行保存依旧运行，函数调用校规定了 JavaScript代码的执行顺序。 栈底永远都是全局上下文，栈顶则是当前正在执行的上下文。

简单来讲，就是当一个函数被调用的时候，一个新的执行上下文会被创建，在执行上下文被创建的这一阶段，它会做以下一些事情：
![](https://cdn.nlark.com/yuque/0/2020/svg/296173/1579584879022-e5f637ec-b1a6-4777-ab76-1ea18c650f16.svg)而到了执行阶段，就会完成对变量的赋值，函数引用，以及执行其他可执行代码：

![](https://cdn.nlark.com/yuque/0/2020/svg/296173/1579587697249-5e0398c6-4fc0-464b-af2b-fc61ab5d34c5.svg)

## 变量对象（Variable Object）

变量对象主要会存储以下内容：

- javaScript代码中声明的所有变量
- 函数的所有参数
- 当前上下文的所有函数声明
- 当前上下文中的所有变量

<br />变量对象的创建：

1. 在谷歌浏览器中，变量对象会受首先获得函数的参数变量以及值，在火狐浏览器中，是直接将参数对象arguements保存在变量对象中
1. 依次获取当前执行上下文的所有函数声明。在变量对象中会以函数名创建一个属性，属性值为指向该函数所在的内存地址引用。如果函数名的属性已经存在，那么该属性的值会被新的引用覆盖。
1. 依次获取当前上下文中的变量声明，每找到一个变量声明，就在变量对象中就以变量名建立一个属性，属性值为 undefined。 如果该变盐名的属性
已经存在，为了防止同名的函数被修改为 undefined，则会直接跳过，原属性值不会被修改。



在函数调用战中，如果当前执行上下文处于函数调用钱的楼顶，则意味着当前上下文处于激
活状态， 此时变量对象称之为活动对象( AO, Activation Object )。 活动对象中包含变量对象的所
有属性，并且此时所有的属性都已经完成了赋值，除此之外，活动对象还包含了 this 的指向 
<br />					